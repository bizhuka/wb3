ID: wb3
_schema-version: '2.1'
description: 'Waybill Node'
version: 0.0.9
modules:
#  - name: wb3-db
#    type: hdb
#    path: db
#    parameters:
#      memory: 256M
#      disk-quota: 256M
#    requires:
#      - name: wb3-hdi-container

  - name: wb3-srv
    type: nodejs
    path: srv
    port: 51062
    parameters:
       memory: 512M
       disk-quota: 512M
    properties:
       WB_IS_TEST: true
       WB_RFC_DEST: '{"client":"305","user":"MM026_DG","passwd":"MTO@2018","lang":"ru","ashost":"172.20.16.88","sysnr":"20","saprouter":"/H/93.185.79.115/S/3299/W/sap83h2m01"}'
       WIALON_OPT: '{"host": "http://188.127.32.26:8022/", "user": "dlcguest", "password": "kEFEHUMFFE", "templateId":19, "resourceId": 291, "tzOffset": 134239328}'
    provides:
       - name: srv_api
         properties:
           url: '${default-url}'
    requires:
       - name: wb3-hdi-container
       - name: wb3-uaa
      
#  - name: wb3-app
#    type: html5
#    path: app
#    parameters:
#      disk-quota: 256M
#      memory: 256M
##    build-parameters:
##      builder: grunt
#    requires:
#      - name: wb3-uaa
#      #- name: srv_api
#      #  group: destinations
#      #  properties:
#      #    name: srv_api
#      #    url: '~{url}'
#      #    forwardAuthToken: true
#    properties:
#      TENANT_HOST_PATTERN: '^(.*).cfapps.eu10.hana.ondemand.com'
#      destinations: >
#        [
#          {"name":"wb-server", "url":"https://s0010568436trial-trial-dev-wb3-srv.cfapps.eu10.hana.ondemand.com", "forwardAuthToken": true },
#          {"name":"wb-analytics", "url":"https://wb-analytics.cfapps.eu10.hana.ondemand.com", "forwardAuthToken": true }
#        ]
        
#resources:
#  - name: wb3-hdi-container
#    type: com.sap.xs.hdi-container
#    properties:
#      hdi-container-name: '${service-name}'
#
#  - name: wb3-uaa
#    type: org.cloudfoundry.managed-service
#    parameters:
#     service-plan: application
#     path: ./xs-security.json
#     service: xsuaa